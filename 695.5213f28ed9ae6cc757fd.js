"use strict";(self.webpackChunkca_sln_web=self.webpackChunkca_sln_web||[]).push([[695],{4695:(e,n,t)=>{t.r(n),t.d(n,{default:()=>j});var a=t(4848),i=t(6540),r=t(1468),o=t(2389),c=t(2242),u=t(2640),s=t(8232),l=t(5765),d=t(9323),f=function(e){var n;return null===(n=null==e?void 0:e.StaffTrainingSchema)||void 0===n?void 0:n.data},h=function(e){var n;return null===(n=null==e?void 0:e.StaffTrainingSchema)||void 0===n?void 0:n.isLoading},v=function(e){var n;return null===(n=null==e?void 0:e.StaffTrainingSchema)||void 0===n?void 0:n.error},m=function(e){var n;return null===(n=null==e?void 0:e.StaffTrainingSchema)||void 0===n?void 0:n._init},p=t(5452),g=t(2635),S=(0,p.zD)("staffTrainings",(function(e,n){var t,a,i,r,o=e.pageNumber,c=(e.pageSize,n.rejectWithValue);return t=void 0,a=void 0,r=function(){return function(e,n){var t,a,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(c){return function(u){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;r&&(r=0,c[0]&&(o=0)),o;)try{if(t=1,a&&(i=2&c[0]?a.return:c[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,c[1])).done)return i;switch(a=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,a=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==c[0]&&2!==c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=n.call(e,o)}catch(e){c=[6,e],a=0}finally{t=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,u])}}}(this,(function(e){try{return[2,{items:[{id:1,fullName:"Иван Иванов",position:"Разработчик",qualificationName:"Продвинутый JavaScript",educationName:"Онлайн курсы",justification:"Повышение квалификации",tuitionFees:5e4},{id:2,fullName:"Мария Сидорова",position:"Аналитик",qualificationName:"Data Science",educationName:"Университет",justification:"Необходимость в проекте",tuitionFees:7e4}],pageNumber:o,totalPages:1,totalCount:2,hasPreviousPage:!1,hasNextPage:!1}]}catch(e){return console.error("[staffTrainings.fetchStaffTrainings]: ",e),[2,c(g.Ay.t("Произошла ошибка при получении списка персонала."))]}return[2]}))},new((i=void 0)||(i=Promise))((function(e,n){function o(e){try{u(r.next(e))}catch(e){n(e)}}function c(e){try{u(r.throw(e))}catch(e){n(e)}}function u(n){var t;n.done?e(n.value):(t=n.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,c)}u((r=r.apply(t,a||[])).next())}))})),b=(0,p.Z0)({name:"staffTrainingSlice",initialState:{data:void 0,isLoading:!1,error:void 0,_init:!1},reducers:{initState:function(e){e._init=!0}},extraReducers:function(e){e.addCase(S.pending,(function(e){e.isLoading=!0})).addCase(S.rejected,(function(e,n){e.isLoading=!1,e.error=n.payload})).addCase(S.fulfilled,(function(e,n){e.isLoading=!1,e.data=n.payload}))}}),N=b.actions,y={StaffTrainingSchema:b.reducer};const j=(0,i.memo)((function(){var e=(0,o.Bd)("StaffTrainingList").t,n=(0,u.j)(),t=(0,r.d4)(f),p=(0,r.d4)(h),g=(0,r.d4)(v),b=(0,r.d4)(m);(0,i.useEffect)((function(){b||(n(N.initState()),n(S({pageNumber:1,pageSize:10})))}),[n,b]);var j=(0,i.useMemo)((function(){return[{header:e("ID"),accessor:"id"},{header:e("ФИО"),accessor:"fullName"},{header:e("Должность"),accessor:"position"},{header:e("Наименование курса повышения квалификации/обучения"),accessor:"educationName"},{header:e("Обоснование необходимости обучения"),accessor:"justification"},{header:e("Стоимость обучения"),accessor:"tuitionFees"},{header:e("Срок обучения"),accessor:"durationStudy"}]}),[e]),x=(0,i.useMemo)((function(){return((null==t?void 0:t.items)||[]).map((function(e){var n;return{id:(null===(n=e.id)||void 0===n?void 0:n.toString())||"",fullName:e.fullName||"",position:e.position||"",qualificationName:e.qualificationName||"",justification:e.justification||"",educationName:e.educationName||"",tuitionFees:e.tuitionFees||"",durationStudy:e.durationStudy||""}}))}),[null==t?void 0:t.items]);return p?null:(0,a.jsxs)(c.A,{reducers:y,children:[(0,a.jsx)(d.A,{to:"/api/StaffTrainings/ExportStaffTraining",variant:"download",target:"_blank",children:e("Выгрузить список")}),(0,a.jsx)(l.A,{columns:j,data:x}),g&&(0,a.jsx)(s.A,{color:"error",children:g})]})}))},2242:(e,n,t)=>{t.d(n,{A:()=>o});var a=t(4848),i=t(6540),r=t(1468);const o=function(e){var n=e.children,t=e.reducers,o=e.removeAfterUnmount,c=void 0!==o&&o,u=(0,r.wA)(),s=(0,r.Pj)();return(0,i.useEffect)((function(){var e=s.reducerManager.getMountedReducers();return Object.entries(t).forEach((function(n){var t=n[0],a=n[1];e[t]||(s.reducerManager.add(t,a),u({type:"@@INIT ".concat(t," reducer")}))})),function(){c&&Object.entries(t).forEach((function(e){var n=e[0];s.reducerManager.remove(n),u({type:"@@DESTROY ".concat(n," reducer")})}))}}),[]),(0,a.jsx)(a.Fragment,{children:n})}},5765:(e,n,t)=>{t.d(n,{A:()=>r});var a=t(4848),i=t(8113);const r=function(e){var n=e.columns,t=e.data,r=e.className;return(0,a.jsxs)("table",{className:(0,i.x)("eVnU_8hM",{},[r]),children:[(0,a.jsx)("thead",{className:"EVNsWKTr",children:(0,a.jsx)("tr",{className:"Wh5JXM1q",children:n.map((function(e,n){return(0,a.jsx)("th",{children:e.header},n)}))})}),(0,a.jsx)("tbody",{className:"y2CCF7cK",children:t.map((function(e,t){return(0,a.jsx)("tr",{className:"WugCWL6d",children:n.map((function(n,t){return(0,a.jsx)("td",{className:"binwKw0l",children:e[n.accessor]},t)}))},t)}))})]})}}}]);