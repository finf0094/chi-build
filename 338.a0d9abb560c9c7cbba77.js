"use strict";(self.webpackChunkca_sln_web=self.webpackChunkca_sln_web||[]).push([[338],{6873:(e,n,r)=>{r.d(n,{K:()=>h});var t=r(6540),a=r(1468),i=r(2389),o=r(2640),c=function(e){var n;return null===(n=null==e?void 0:e.StaffTrainingSchema)||void 0===n?void 0:n.data},s=function(e){var n;return null===(n=null==e?void 0:e.StaffTrainingSchema)||void 0===n?void 0:n.isLoading},u=function(e){var n;return null===(n=null==e?void 0:e.StaffTrainingSchema)||void 0===n?void 0:n.error},d=function(e){var n;return null===(n=null==e?void 0:e.StaffTrainingSchema)||void 0===n?void 0:n._init},l=r(7683),f=r(8937),h=function(){var e=(0,i.Bd)("StaffTrainingList").t,n=(0,o.j)(),r=(0,a.d4)(c),h=(0,a.d4)(s),m=(0,a.d4)(u),v=(0,a.d4)(d);return(0,t.useEffect)((function(){v||(n(f.o.initState()),n((0,l.s)({pageNumber:1,pageSize:10})))}),[n,v]),{t:e,items:null==r?void 0:r.items,isLoading:h,error:m}}},7683:(e,n,r)=>{r.d(n,{s:()=>o});var t=r(5452),a=r(2635),i=new(r(8156).BR),o=(0,t.zD)("staffTrainings",(function(e,n){var r,t,o,c,s=e.pageNumber,u=e.pageSize,d=n.rejectWithValue;return r=void 0,t=void 0,c=function(){var e;return function(e,n){var r,t,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){return function(c){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(o=0)),o;)try{if(r=1,t&&(a=2&c[0]?t.return:c[0]?t.throw||((a=t.return)&&a.call(t),0):t.next)&&!(a=a.call(t,c[1])).done)return a;switch(t=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,t=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==c[0]&&2!==c[0])){o=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){o.label=c[1];break}if(6===c[0]&&o.label<a[1]){o.label=a[1],a=c;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(c);break}a[2]&&o.ops.pop(),o.trys.pop();continue}c=n.call(e,o)}catch(e){c=[6,e],t=0}finally{r=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}}(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,i.getStaffTrainings(s,u)];case 1:return[2,n.sent().toJSON()];case 2:return e=n.sent(),console.error("[staffTrainings.fetchStaffTrainings]: ",e),[2,d(a.Ay.t("Произошла ошибка при получении списка персонала."))];case 3:return[2]}}))},new((o=void 0)||(o=Promise))((function(e,n){function a(e){try{s(c.next(e))}catch(e){n(e)}}function i(e){try{s(c.throw(e))}catch(e){n(e)}}function s(n){var r;n.done?e(n.value):(r=n.value,r instanceof o?r:new o((function(e){e(r)}))).then(a,i)}s((c=c.apply(r,t||[])).next())}))}))},8937:(e,n,r)=>{r.d(n,{o:()=>o,z:()=>c});var t=r(5452),a=r(7683),i=(0,t.Z0)({name:"staffTrainingSlice",initialState:{data:void 0,isLoading:!1,error:void 0,_init:!1},reducers:{initState:function(e){e._init=!0}},extraReducers:function(e){e.addCase(a.s.pending,(function(e){e.isLoading=!0})).addCase(a.s.rejected,(function(e,n){e.isLoading=!1,e.error=n.payload})).addCase(a.s.fulfilled,(function(e,n){e.isLoading=!1,e.data=n.payload}))}}),o=i.actions,c=i.reducer},3338:(e,n,r)=>{r.r(n),r.d(n,{default:()=>h});var t=r(4848),a=r(6540),i=r(2242),o=r(8232),c=r(9654),s=r(9323),u=r(8113),d=r(8937);var l=r(6873),f={StaffTrainingSchema:d.z};const h=(0,a.memo)((function(e){var n=e.className,r=(0,l.K)(),d=r.t,h=r.items,m=r.isLoading,v=r.error,g=(0,a.useMemo)((function(){return[{header:d("ID"),accessor:"id"},{header:d("ФИО"),accessor:"fullName"},{header:d("Должность"),accessor:"position"},{header:d("Наименование курса повышения квалификации/обучения"),accessor:"educationName"},{header:d("Обоснование необходимости обучения"),accessor:"justification"},{header:d("Стоимость обучения"),accessor:"tuitionFees"},{header:d("Срок обучения"),accessor:"durationStudy"}]}),[d]),p=(0,a.useMemo)((function(){return(h||[]).map((function(e){var n;return{id:(null===(n=e.id)||void 0===n?void 0:n.toString())||"",fullName:e.fullName||"",position:e.position||"",qualificationName:e.qualificationName||"",justification:e.justification||"",educationName:e.educationName||"",tuitionFees:e.tuitionFees||"",durationStudy:e.durationStudy||""}}))}),[h]);return(0,t.jsxs)(i.A,{reducers:f,children:[(0,t.jsx)(s.A,{to:"/api/StaffTrainings/ExportStaffTraining",variant:"download",target:"_blank",children:d("Выгрузить список")}),(0,t.jsxs)("div",{className:(0,u.x)("r4uKk75V",{},[n]),children:[(0,t.jsx)(c.A,{columns:g,data:p}),m&&(0,t.jsx)(c.O,{columns:8,rows:12})]}),v&&(0,t.jsx)(o.A,{color:"error",children:v})]})}))},2242:(e,n,r)=>{r.d(n,{A:()=>o});var t=r(4848),a=r(6540),i=r(1468);const o=function(e){var n=e.children,r=e.reducers,o=e.removeAfterUnmount,c=void 0!==o&&o,s=(0,i.wA)(),u=(0,i.Pj)();return(0,a.useEffect)((function(){var e=u.reducerManager.getMountedReducers();return Object.entries(r).forEach((function(n){var r=n[0],t=n[1];e[r]||(u.reducerManager.add(r,t),s({type:"@@INIT ".concat(r," reducer")}))})),function(){c&&Object.entries(r).forEach((function(e){var n=e[0];u.reducerManager.remove(n),s({type:"@@DESTROY ".concat(n," reducer")})}))}}),[]),(0,t.jsx)(t.Fragment,{children:n})}},9654:(e,n,r)=>{r.d(n,{O:()=>f,A:()=>h});var t=r(4848),a=r(8113);const i="eVnU_8hM",o="EVNsWKTr",c="Wh5JXM1q",s="y2CCF7cK",u="WugCWL6d",d="binwKw0l";var l=r(2253);const f=function(e){var n=e.columns,r=e.rows,f=e.className;return(0,t.jsxs)("table",{className:(0,a.x)(i,{},[f]),children:[(0,t.jsx)("thead",{className:o,children:(0,t.jsx)("tr",{className:c,children:Array.from({length:n},(function(e,n){return(0,t.jsx)("th",{children:(0,t.jsx)(l.E,{width:"100%",height:16})},n)}))})}),(0,t.jsx)("tbody",{className:s,children:Array.from({length:r},(function(e,r){return(0,t.jsx)("tr",{className:u,children:Array.from({length:n},(function(e,n){return(0,t.jsx)("td",{className:d,children:(0,t.jsx)(l.E,{width:"100%",height:16})},n)}))},r)}))})]})},h=function(e){var n=e.columns,r=e.data,l=e.className;return(0,t.jsxs)("table",{className:(0,a.x)(i,{},[l]),children:[(0,t.jsx)("thead",{className:o,children:(0,t.jsx)("tr",{className:c,children:n.map((function(e,n){return(0,t.jsx)("th",{children:e.header},n)}))})}),(0,t.jsx)("tbody",{className:s,children:r.map((function(e,r){return(0,t.jsx)("tr",{className:u,children:n.map((function(n,r){return(0,t.jsx)("td",{className:d,children:e[n.accessor]},r)}))},r)}))})]})}}}]);